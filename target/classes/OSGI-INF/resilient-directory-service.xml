<?xml version="1.0"?>
<component name="org.nuxeo.ecm.directory.resilient.ResilientDirectoryFactory">

  <implementation
      class="org.nuxeo.ecm.directory.resilient.ResilientDirectoryFactory"/>

  <require>org.nuxeo.ecm.directory.DirectoryServiceImpl</require>

  <documentation>Resilient directory implementation.</documentation>

  <extension target="org.nuxeo.ecm.directory.DirectoryServiceImpl"
      point="factoryDescriptor">
    <factoryDescriptor
        component="org.nuxeo.ecm.directory.resilient.ResilientDirectoryFactory"/>
  </extension>

  <extension-point name="directories">
    <object
        class="org.nuxeo.ecm.directory.resilient.ResilientDirectoryDescriptor"/>
    <object
        class="org.nuxeo.ecm.directory.resilient.SubDirectoryDescriptor"/>

    <documentation>
      This extension point can be used to register new
      resilient directories. The extension must contain at least one master source for any number of
      slave directories declarations of the form:

      <code>
        ...
        <directory name="userDirectory">
         
          <querySizeLimit>1000</querySizeLimit>

            <subDirectory name="ldapusers" master="true"/>

            <subDirectory name="sqlUserDirectory"/>

        </directory>
        ...
      </code>

      
    </documentation>
  </extension-point>

</component>
